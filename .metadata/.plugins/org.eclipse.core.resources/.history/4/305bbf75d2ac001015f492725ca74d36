package com.zozofood.service;

import org.springframework.stereotype.Service;

import com.zozofood.builder.RestaurantCreationBuilder;
import com.zozofood.builder.RestaurantResponseBuilder;
import com.zozofood.dao.RestaurantRepository;
import com.zozofood.dto.RestaurantCreationRequestDto;
import com.zozofood.dto.RestaurantCreationResponseDto;
import com.zozofood.dto.RestaurantResponseDTO;
import com.zozofood.exception.RestaurantNotFoundException;
import com.zozofood.model.Restaurant;

@Service
public class RestaurnatServiceImp implements RestaurantService {

	private final RestaurantRepository restaurantRepository;
	
	

	public RestaurnatServiceImp(RestaurantRepository restaurantRepository) {
		this.restaurantRepository = restaurantRepository;
			}

	@Override
	public RestaurantCreationResponseDto createRestaurant(RestaurantCreationRequestDto restaurantCreationRequestDto) {
		RestaurantCreationResponseDto responseDto = new RestaurantCreationResponseDto();
		
		Restaurant savedRestaurant = restaurantRepository.save(RestaurantCreationBuilder
				.buildRestaurantFromRestaurantCreationRequestDto(restaurantCreationRequestDto));
		
		return  new RestaurantCreationResponseDto(savedRestaurant.getRestaurantId(), savedRestaurant.getRestaurantName());
	}

	@Override
	public RestaurantResponseDTO getRestaurantById(Long restaurantId) {
		
		  Restaurant restaurant = restaurantRepository.findById(restaurantId).orElseThrow( ()-> new RestaurantNotFoundException("Restaurant with id " + restaurantId + " not found"));
		
		   return RestaurantResponseBuilder.restaurantRespFromRestaurant(restaurant); 
		
	}


}
