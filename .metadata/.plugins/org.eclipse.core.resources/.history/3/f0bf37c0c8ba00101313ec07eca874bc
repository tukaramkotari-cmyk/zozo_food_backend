package com.zozofood.builder;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import com.zozofood.config.JwtUtil;
import com.zozofood.dto.ProfileRespWithTokenDto;
import com.zozofood.dto.ProfileResponseDto;
import com.zozofood.entity.User;
//
//public class ProfileBuilder {
//	private static JwtUtil jwtUtil;
//	
//	
//	public  ProfileBuilder() {
//		this.jwtUtil = new JwtUtil();
//	}
//
//	
//	public static ProfileResponseDto toProfileResponseDto(User user) {
//		return ProfileResponseDto.builder()
//				.username(user.getUsername())
//				.email(user.getEmail())
//				.address(user.getAddress())
//				.build();
//	}
//	
//	public static ProfileRespWithTokenDto toProfileRespWithTokenDto(User user, boolean namechanged) {
//		ProfileResponseDto profile = toProfileResponseDto(user);
//		return ProfileRespWithTokenDto.builder()
//				.profile(profile)
//				.newJWTToken(namechanged ? jwtUtil.generateToken(user.getUsername()) : null)
//				.build();
//	}
//}

@Component
public class ProfileBuilder {

    private final JwtUtil jwtUtil;

    @Autowired
    public ProfileBuilder(JwtUtil jwtUtil) {
        this.jwtUtil = jwtUtil;
    }

    public ProfileResponseDto toProfileResponseDto(User user) {
        return ProfileResponseDto.builder()
                .username(user.getUsername())
                .email(user.getEmail())
                .address(user.getAddress())
                .build();
    }

    public ProfileRespWithTokenDto toProfileRespWithTokenDto(User user, boolean namechanged) {
        ProfileResponseDto profile = toProfileResponseDto(user);
        return ProfileRespWithTokenDto.builder()
                .profile(profile)
                .newJWTToken(namechanged ? jwtUtil.generateToken(user.getUsername()) : null)
                .build();
    }
}
